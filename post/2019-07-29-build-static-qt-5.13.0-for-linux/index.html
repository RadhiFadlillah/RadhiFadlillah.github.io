<!doctype html><html>
<head>
<title>Build Static Qt 5.13.0 for Linux - Radhi Fadlillah</title>
<meta name=twitter:title content="Build Static Qt 5.13.0 for Linux - Radhi Fadlillah">
<meta property=og:title content="Build Static Qt 5.13.0 for Linux - Radhi Fadlillah">
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<meta name=description content="While working on Qamel, I want it to support compiling static app for Linux and Windows. When targetting Windows, this is simple enough thanks to project like MXE and MSYS2 which already provided static Qt libraries. However, when targeting Linux platform, there are no choice except building static Qt libraries by ourself.">
<meta name=twitter:description content="While working on Qamel, I want it to support compiling static app for Linux and Windows. When targetting Windows, this is simple enough thanks to project like MXE and MSYS2 which already provided static Qt libraries. However, when targeting Linux platform, there are no choice except building static Qt libraries by ourself.">
<meta property=og:description content="While working on Qamel, I want it to support compiling static app for Linux and Windows. When targetting Windows, this is simple enough thanks to project like MXE and MSYS2 which already provided static Qt libraries. However, when targeting Linux platform, there are no choice except building static Qt libraries by ourself.">
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700">
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700">
<link rel=stylesheet href=/css/stylesheet.css>
<link rel=stylesheet href=/css/dracula.css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/res/apple-touch-icon-144x144.png>
<link rel=apple-touch-icon-precomposed sizes=152x152 href=/res/apple-touch-icon-152x152.png>
<link rel=icon type=image/png href=/res/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/res/favicon-16x16.png sizes=16x16>
<link rel="shortcut icon" href=/res/favicon.ico>
</head>
<body>
<div id=header>
<div class=content>
<a id=text-logo href=/>Radhi Fadlillah</a>
<div class=spacer></div>
<a href=/page/about class=header-link>About</a>
</div>
</div>
<div id=body>
<div class=content id=content-post>
<div id=post-metadata>
<a id=post-category href=/category/programming>
programming
</a>
<p id=post-title>Build Static Qt 5.13.0 for Linux</p>
<div id=post-time>
<p id=post-author>Radhi Fadlillah</p>
<p id=post-created>2019-07-29 14:18</p>
</div>
</div>
<div id=post-html class=content-html><html><head></head><body><p>While working on <a href=https://github.com/RadhiFadlillah/qamel>Qamel</a>, I want it to support compiling static app for Linux and Windows. When targetting Windows, this is simple enough thanks to project like <a href=https://mxe.cc/>MXE</a> and <a href=https://www.msys2.org/>MSYS2</a> which already provided static Qt libraries. However, when targeting Linux platform, there are no choice except building static Qt libraries by ourself.</p>
<p>In this tutorial, I will use Ubuntu 16.04 and the static Qt will be build into <code>/home/radhi/Qt.5.13.0.Static</code>.</p>
<p>First we need to install the required dependencies. There are two type of dependencies: the dependencies that used for Qt’s <a href=https://doc.qt.io/qt-5/linux.html#requirements-for-development-host>development</a> and the dependencies that used for static <a href=https://doc.qt.io/qt-5/linux-requirements.html>build</a>.</p>
<pre><code><pre class=chroma>sudo apt-get update
sudo apt-get install build-essential libgl1-mesa-dev \
    libfontconfig1-dev libfreetype6-dev libx11-dev libxext-dev \
    libxfixes-dev libxi-dev libxrender-dev libxcb1-dev \
    libx11-xcb-dev libxcb-glx0-dev libxkbcommon-dev \
    libxkbcommon-x11-dev &#39;^libxcb.*-dev&#39;</pre></code></pre>
<p>Next download the Qt’s <a href=https://www.qt.io/offline-installers>source code</a>. If you want to download the old version, you can download it via its <a href=https://download.qt.io/official_releases/qt/>repositories</a>. After download finished, extract it to wherever you want.</p>
<p>Next, open terminal inside the directory where you extract the source code. Here we will run <code>./configure</code> to specify that we want to build static libraries. There are many parameters that can be changed which can be seen in <a href=https://doc.qt.io/qt-5/configure-options.html>documentation</a> or by running <code>./configure -h</code>. In my case, I do it like this :</p>
<pre><code><pre class=chroma>./configure -static -prefix &#34;/opt/Qt$QT_VERSION&#34; \
    -opensource -confirm-license -release \
    -optimize-size -strip -fontconfig \
    -qt-zlib -qt-libjpeg -qt-libpng -qt-xcb \
    -qt-pcre -qt-harfbuzz -qt-doubleconversion \
    -nomake tools -nomake examples -nomake tests \
    -no-pch -skip qtwebengine</pre></code></pre>
<p>Here’s description for the parameters that I used :</p>
<ul>
<li><code>static</code> specify that we want to build static version;</li>
<li><code>prefix</code> is where to put the result;</li>
<li><code>open-source</code> means we will use the open source license, in this case LGPLv3;</li>
<li><code>confirm-license</code> tells that we accept the license, therefore we won’t be asked again later;</li>
<li><code>release</code> tells that the output Qt libraries will not support debugging. This is used because in my case the static build will only used for publishing, therefore there is no need to support debugging there;</li>
<li><code>optimize-size</code> tells that when building our app, we want its size optimized even if it increase the build time for our app;</li>
<li><code>strip</code> will strips the released binaries of unneeded symbols;</li>
<li><code>fontconfig</code> tells that our Qt libraries will use fontconfig that provided by system instead of the one that provided by Qt. This is used to avoid ugly error warning about missing fontconfig in some distro;</li>
<li><code>qt-*</code> tells that our Qt libraries will use the libraries that provided by Qt instead of the one that provided by system;</li>
<li><code>nomake tools</code> is used because we don’t need to build Qt tools (like Qt Creator);</li>
<li><code>nomake examples</code> because we don’t need to build examples;</li>
<li><code>nomake tests</code> because we don’t need to build tests;</li>
<li><code>no-pch</code> means no precompiled headers, meaning that all the header files (.h) will not be precompiled so we’ll get all the benefits from <code>#ifdef</code>. This one is used following tutorial from <a href=https://retifrav.github.io/blog/2018/02/17/build-qt-statically/>Retifrav</a>;</li>
<li><code>skip qtwebengine</code> because I don’t use it.</li>
</ul>
<p>Once the configuration process finished, we only need to build it :</p>
<pre><code><pre class=chroma>make -j $(grep -c ^processor /proc/cpuinfo)</pre></code></pre>
<p>This might take a long time depending on number of CPU core that available to use. In my case, it took almost 3-4 hours until it finished. Once the build finished, we only need to install it to our specified <code>prefix</code> by running :</p>
<pre><code><pre class=chroma>make install</pre></code></pre>
<p>Once finished, the static Qt libraries is already built and ready to use.</p>
</body></html></div>
<div id=post-tags>
<a href=/tag/linux># linux</a>
<a href=/tag/qt># qt</a>
<a href=/tag/tutorial># tutorial</a>
</div>
</div>
</div>
<div id=footer>
<div class=content>
<p>© 2019 Radhi Fadlillah. Made with <a href=https://github.com/go-spook/spook>Spook</a>
using the <a href=https://github.com/go-spook/basic-theme>Basic</a> theme.</p>
</div>
</div>
</body>
</html>